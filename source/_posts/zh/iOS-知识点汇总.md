---
title: iOS 知识点汇总
description: iOS 知识点汇总，查缺补漏，方便查阅
date: 2024-11-21 11:38:30
tags:
    - iOS 知识点
    - Objective-C
categories:
    - iOS 开发
    - Objective-C
---

1. Objective-C是一种面向对象的编程语言，它是C语言的**超集**(superset)。它是由Smalltalk演化而来的。Objective-C是动态语言，使用动态绑定的消息结构，这意味着在运行时进行对象的类型检查。对象在接收到其他对象发来的消息时，执行的方法是由消息的接收者决定的。也就是说，执行后续代码是由运行期环境决定的而不是由编译器决定的。
2. Objective-C使用**自动引用计数**(ARC)来进行内存管理的，在Objective-C中，每个对象都有一个引用计数器，当对象的引用计数器为0时，对象就会被销毁。
3. 在Objective-C中，所有的类都是继承自NSObject类。NSObject类是Objective-C中所有类的基类。
4. 在Objective-C中，对象一般都是存储在**堆空间**(heap space)中的, 而指向这个对象的指针是存储在**栈空间**(stack space)中的。如果是非对象类型的数据，比如*int、float*等，一般是存储在栈空间中的，这么做的原因是因为这些数据类型的大小是固定的，所以可以在栈空间中分配足够的空间来存储它们。提高程序的效率。
5. 如果两个类互相引用，需要使用`@class`关键字来解**决循环引用**(chicken-and-egg situation)的问题。`@class`也有**向前声明**(forward declaring)的作用，目的是为了提高编译速度。在有需要细节的地方，使用`#import`关键字来引入头文件。使用向前声明可以降低类之间的**耦合**(coupling)。如果是继承某个超类，则必须引入那个超类的头文件。如果遵循某个**协议**(protocol)，则必须引入那个协议的头文件。协议要单独放在一个头文件中或者移至“class-continuation 分类”中，如果放在一个大的头文件中，必定会产生依赖问题，而且还会增加编译时间。
6. 应该使用字面量语法来创建字符串、数值、数组、字典。这样可以提高代码的可读性和可维护性。应该通过下标操作来访问数组和字典中的元素。用字面量创建数组和字典时，要确保不含nil，否则会导致程序崩溃。如果是自定义的子类，则无法使用字面量来创建。
7. 不要使用预处理指令定义常量。因为定义出来的常量不包含类型信息，编译器只是做简单的替换工作，这样会导致如果有人修改了或者重新定义了此常量值，就会照成严重的后果。应该使用`static const`在.m文件中定义常量，static使其只作用在编译单元内，const是为了不让常量值被修改，否者如果其它.m文件有同样名称的常量，编译器就会报错。可以在头文件中使用`extern`关键字来声明常量，并在.m文件中定义其值。因为Objective-C没有命名空间的特性,这种常量需要加上与之相关的类目加以区分，否者编译期间会产生错误和冲突。
8. 应该使用枚举来表示状态，而不是使用布尔值。枚举类型可以让代码更加清晰和易于理解。我们应该给这些值取个简单易懂的名字。如果枚举的选项需要进行组合使用，则要将值定义为2的幂。可以使用NS_ENUM与NS_OPTIONS宏来定义枚举类型并指明其底层数据类型，只能是整型数据。不然就是采用编译器默认的数据类型。在使用switch语句解析枚举时，不要实现default分支，因为如果加入新的枚举，编译器就不会发出警告了，这可能会导致程序出现问题。
9. 可以使用`@property`来定义属性，编译器自动生成存取方法，然后通过设置原子性、读写权限、内存管理来制定属性的行为。这些关键字包括`atomic`、`nonatomic`、`copy`、`strong`、`weak`、`assign`等。在设置属性所对应的实例变量时，一定要遵循从该属性所声明的语义。开发iOS应用时，应该使用`nonatomic`关键字来提高性能，一般情况下应用都是单线程情况，所以没必要使用原子性。`getter=<name>`关键字可以修改属性的getter方法的名称。`setter=<name>`关键字可以修改属性的setter方法的名称。
10. `@synthesize`关键字可以修改属性的别名，默认是带下划线的属性名。`@dynamic`关键字可以告诉编译器，属性的实现是在运行时动态绑定的，即不在编译器生成存取方法。